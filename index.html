<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elizi Emlak - Rezervasyon Sistemi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #3a86ff;
            --secondary-color: #ff006e;
            --accent-color: #8338ec;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --success-color: #38b000;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fb;
            color: var(--dark-color);
        }
        
        .navbar-brand {
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .sidebar {
            background: linear-gradient(135deg, #1a2a6c, #3a7bd5);
            color: white;
            min-height: 100vh;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        
        .sidebar .nav-link {
            color: rgba(255,255,255,0.8);
            padding: 12px 20px;
            margin: 5px 0;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .sidebar .nav-link:hover, .sidebar .nav-link.active {
            background-color: rgba(255,255,255,0.1);
            color: white;
        }
        
        .sidebar .nav-link i {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s;
            margin-bottom: 20px;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            background-color: white;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            font-weight: 600;
            padding: 15px 20px;
            border-radius: 12px 12px 0 0 !important;
        }
        
        .stat-card {
            text-align: center;
            padding: 20px;
        }
        
        .stat-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .stat-card .number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark-color);
        }
        
        .stat-card .label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .portfolio-card .img-placeholder {
            height: 180px;
            background: linear-gradient(45deg, #6a11cb, #2575fc);
            border-radius: 10px 10px 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }
        
        .portfolio-card .badge {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 0.8rem;
            padding: 5px 10px;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-danger {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .btn-success {
            background-color: var(--success-color);
            border-color: var(--success-color);
        }
        
        .table th {
            font-weight: 600;
            color: #495057;
        }
        
        .calendar-day {
            border: 1px solid #e9ecef;
            height: 100px;
            padding: 5px;
            position: relative;
        }
        
        .calendar-day.today {
            background-color: rgba(58, 134, 255, 0.1);
        }
        
        .calendar-day.booked {
            background-color: rgba(255, 0, 110, 0.1);
        }
        
        .day-number {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .reservation-event {
            font-size: 0.75rem;
            background-color: var(--primary-color);
            color: white;
            padding: 2px 5px;
            border-radius: 3px;
            margin-top: 2px;
            cursor: pointer;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .section-title {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-weight: 700;
            color: var(--dark-color);
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(58, 134, 255, 0.25);
        }
        
        footer {
            background-color: white;
            padding: 20px;
            margin-top: 20px;
            border-top: 1px solid rgba(0,0,0,0.05);
        }
        
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }
        
        .empty-state i {
            font-size: 5rem;
            margin-bottom: 20px;
            color: #e9ecef;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .reservation-row {
            transition: all 0.3s;
        }
        
        .reservation-row:hover {
            background-color: rgba(58, 134, 255, 0.05);
        }
        
        .action-buttons .btn {
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        
        .action-buttons .btn:hover {
            opacity: 1;
        }
        
        .form-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .portfolio-item {
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .portfolio-item:hover {
            transform: scale(1.02);
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="bi bi-house-door-fill me-2"></i>Elizi Emlak
            </a>
            <div class="d-flex align-items-center">
                <div class="dropdown me-3">
                    <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="https://ui-avatars.com/api/?name=E+E&background=3a86ff&color=fff" alt="User" width="32" height="32" class="rounded-circle me-2">
                        <span class="d-none d-md-inline">Elizi Emlak</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="#" data-page="settings"><i class="bi bi-gear me-2"></i>Ayarlar</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" id="logout-btn"><i class="bi bi-box-arrow-right me-2"></i>Çıkış</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-2 d-none d-lg-block sidebar">
                <div class="pt-4">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" data-page="dashboard">
                                <i class="bi bi-speedometer2"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="reservations">
                                <i class="bi bi-calendar-check"></i> Rezervasyonlar
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="portfolios">
                                <i class="bi bi-house-door"></i> Portföyler
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="customers">
                                <i class="bi bi-people"></i> Müşteriler
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="reports">
                                <i class="bi bi-graph-up"></i> Raporlar
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="settings">
                                <i class="bi bi-gear"></i> Ayarlar
                            </a>
                        </li>
                        <li class="nav-item mt-4">
                            <a class="nav-link bg-success bg-opacity-25" href="#" data-page="add-reservation">
                                <i class="bi bi-plus-circle"></i> Yeni Rezervasyon
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link bg-primary bg-opacity-25" href="#" data-page="add-portfolio">
                                <i class="bi bi-house-add"></i> Portföy Ekle
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-10 col-md-12 ms-sm-auto px-4 py-4">
                <!-- Dashboard Page -->
                <div id="dashboard-page" class="page active">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center mb-4">
                        <h2 class="section-title">Dashboard</h2>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <div class="btn-group me-2">
                                <button type="button" class="btn btn-sm btn-outline-secondary">Bu Hafta</button>
                                <button type="button" class="btn btn-sm btn-outline-secondary">Bu Ay</button>
                                <button type="button" class="btn btn-sm btn-outline-secondary">Bu Yıl</button>
                            </div>
                            <button type="button" class="btn btn-sm btn-primary">
                                <i class="bi bi-download me-1"></i> Rapor Al
                            </button>
                        </div>
                    </div>

                    <!-- Stats Cards -->
                    <div class="row mb-4" id="dashboard-stats">
                        <!-- Stats will be loaded dynamically -->
                    </div>

                    <div class="row">
                        <!-- Portföyler -->
                        <div class="col-lg-8">
                            <div class="card mb-4">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span>Müsait Portföyler</span>
                                    <button class="btn btn-sm btn-primary" data-page="add-portfolio"><i class="bi bi-plus me-1"></i> Yeni Ekle</button>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="portfolios-table">
                                            <thead>
                                                <tr>
                                                    <th>Portföy</th>
                                                    <th>Konum</th>
                                                    <th>Tip</th>
                                                    <th>Fiyat</th>
                                                    <th>Durum</th>
                                                    <th>İşlem</th>
                                                </tr>
                                            </thead>
                                            <tbody id="portfolios-list">
                                                <!-- Portfolios will be loaded dynamically -->
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="d-flex justify-content-end">
                                        <a href="#" class="btn btn-sm btn-outline-primary" data-page="portfolios">Tüm Portföyler <i class="bi bi-arrow-right ms-1"></i></a>
                                    </div>
                                </div>
                            </div>

                            <!-- Takvim -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    Rezervasyon Takvimi
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <h5 class="mb-0" id="calendar-month">Haziran 2023</h5>
                                        <div>
                                            <button class="btn btn-sm btn-outline-secondary" id="prev-month"><i class="bi bi-chevron-left"></i></button>
                                            <button class="btn btn-sm btn-outline-secondary" id="next-month"><i class="bi bi-chevron-right"></i></button>
                                        </div>
                                    </div>
                                    <div class="calendar">
                                        <div class="row row-cols-7 text-center fw-bold mb-2">
                                            <div class="col text-danger">Pz</div>
                                            <div class="col">Pzt</div>
                                            <div class="col">Sal</div>
                                            <div class="col">Çar</div>
                                            <div class="col">Per</div>
                                            <div class="col">Cum</div>
                                            <div class="col">Cmt</div>
                                        </div>
                                        <div class="row row-cols-7" id="calendar-days">
                                            <!-- Calendar days will be loaded dynamically -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Rezervasyon ve Özet -->
                        <div class="col-lg-4">
                            <!-- Rezervasyon Formu -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    Yeni Rezervasyon
                                </div>
                                <div class="card-body">
                                    <form id="reservation-form">
                                        <div class="mb-3">
                                            <label class="form-label">Portföy Seçin</label>
                                            <select class="form-select" id="portfolio-select" required>
                                                <option value="" selected disabled>Portföy seçin</option>
                                                <!-- Options will be populated dynamically -->
                                            </select>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Giriş Tarihi</label>
                                                <input type="date" class="form-control" id="checkin-date" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Çıkış Tarihi</label>
                                                <input type="date" class="form-control" id="checkout-date" required>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Müşteri Bilgileri</label>
                                            <input type="text" class="form-control mb-2" id="customer-name" placeholder="Ad Soyad" required>
                                            <input type="tel" class="form-control mb-2" id="customer-phone" placeholder="Telefon" required>
                                            <input type="email" class="form-control" id="customer-email" placeholder="E-posta">
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Toplam Tutar (₺)</label>
                                                <input type="number" class="form-control" id="total-amount" placeholder="0.00" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Komisyon (₺)</label>
                                                <input type="number" class="form-control" id="commission" placeholder="0.00" required>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Notlar</label>
                                            <textarea class="form-control" id="notes" rows="2"></textarea>
                                        </div>
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">Rezervasyon Yap</button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <!-- Özet -->
                            <div class="card">
                                <div class="card-header">
                                    Rezervasyon Özeti
                                </div>
                                <div class="card-body" id="reservation-summary">
                                    <!-- Summary will be loaded dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reservations Page -->
                <div id="reservations-page" class="page">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center mb-4">
                        <h2 class="section-title">Rezervasyonlar</h2>
                        <button class="btn btn-sm btn-success" data-page="add-reservation">
                            <i class="bi bi-plus-circle me-1"></i> Yeni Rezervasyon
                        </button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span>Tüm Rezervasyonlar</span>
                            <div class="d-flex">
                                <input type="text" class="form-control form-control-sm me-2" placeholder="Ara..." id="reservation-search">
                                <select class="form-select form-select-sm" id="reservation-filter">
                                    <option value="all">Tümü</option>
                                    <option value="active">Aktif</option>
                                    <option value="completed">Tamamlandı</option>
                                    <option value="canceled">İptal Edildi</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Portföy</th>
                                            <th>Müşteri</th>
                                            <th>Tarih</th>
                                            <th>Tutar</th>
                                            <th>Komisyon</th>
                                            <th>Durum</th>
                                            <th>İşlemler</th>
                                        </tr>
                                    </thead>
                                    <tbody id="reservations-list">
                                        <!-- Reservations will be loaded dynamically -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Portfolios Page -->
                <div id="portfolios-page" class="page">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center mb-4">
                        <h2 class="section-title">Portföyler</h2>
                        <button class="btn btn-sm btn-primary" data-page="add-portfolio">
                            <i class="bi bi-plus-circle me-1"></i> Yeni Portföy
                        </button>
                    </div>
                    
                    <div class="row" id="portfolios-grid">
                        <!-- Portfolios will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add Portfolio Page -->
                <div id="add-portfolio-page" class="page">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center mb-4">
                        <h2 class="section-title">Portföy Ekle</h2>
                        <button class="btn btn-sm btn-outline-secondary" data-page="portfolios">
                            <i class="bi bi-arrow-left me-1"></i> Geri Dön
                        </button>
                    </div>
                    
                    <div class="form-container">
                        <form id="portfolio-form">
                            <div class="mb-3">
                                <label class="form-label">Portföy Adı</label>
                                <input type="text" class="form-control" id="portfolio-name" required>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">Konum</label>
                                    <input type="text" class="form-control" id="portfolio-location" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Oda Tipi (örn: 3+1)</label>
                                    <input type="text" class="form-control" id="portfolio-type" required>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">Günlük Fiyat (₺)</label>
                                    <input type="number" class="form-control" id="portfolio-price" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Durum</label>
                                    <select class="form-select" id="portfolio-status">
                                        <option value="available">Müsait</option>
                                        <option value="partially">Kısmen Dolu</option>
                                        <option value="occupied">Dolu</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Açıklama</label>
                                <textarea class="form-control" id="portfolio-description" rows="3"></textarea>
                            </div>
                            <div class="d-grid mt-4">
                                <button type="submit" class="btn btn-primary">Portföyü Kaydet</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Add Reservation Page -->
                <div id="add-reservation-page" class="page">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center mb-4">
                        <h2 class="section-title">Yeni Rezervasyon</h2>
                        <button class="btn btn-sm btn-outline-secondary" data-page="reservations">
                            <i class="bi bi-arrow-left me-1"></i> Geri Dön
                        </button>
                    </div>
                    
                    <div class="form-container">
                        <form id="new-reservation-form">
                            <div class="mb-3">
                                <label class="form-label">Portföy Seçin</label>
                                <select class="form-select" id="new-portfolio-select" required>
                                    <option value="" selected disabled>Portföy seçin</option>
                                    <!-- Options will be populated dynamically -->
                                </select>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">Giriş Tarihi</label>
                                    <input type="date" class="form-control" id="new-checkin-date" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Çıkış Tarihi</label>
                                    <input type="date" class="form-control" id="new-checkout-date" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Müşteri Bilgileri</label>
                                <input type="text" class="form-control mb-2" id="new-customer-name" placeholder="Ad Soyad" required>
                                <input type="tel" class="form-control mb-2" id="new-customer-phone" placeholder="Telefon" required>
                                <input type="email" class="form-control" id="new-customer-email" placeholder="E-posta">
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">Toplam Tutar (₺)</label>
                                    <input type="number" class="form-control" id="new-total-amount" placeholder="0.00" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Komisyon (₺)</label>
                                    <input type="number" class="form-control" id="new-commission" placeholder="0.00" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Notlar</label>
                                <textarea class="form-control" id="new-notes" rows="2"></textarea>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Durum</label>
                                <select class="form-select" id="reservation-status">
                                    <option value="active">Aktif</option>
                                    <option value="completed">Tamamlandı</option>
                                    <option value="canceled">İptal Edildi</option>
                                </select>
                            </div>
                            <div class="d-grid mt-4">
                                <button type="submit" class="btn btn-primary">Rezervasyonu Kaydet</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Other pages (Customers, Reports, Settings) -->
                <div id="customers-page" class="page">
                    <h2 class="section-title">Müşteriler</h2>
                    <div class="alert alert-info">
                        Müşteri yönetimi yakında eklenecektir.
                    </div>
                </div>
                
                <div id="reports-page" class="page">
                    <h2 class="section-title">Raporlar</h2>
                    <div class="alert alert-info">
                        Raporlama özellikleri yakında eklenecektir.
                    </div>
                </div>
                
                <div id="settings-page" class="page">
                    <h2 class="section-title">Ayarlar</h2>
                    <div class="alert alert-info">
                        Sistem ayarları yakında eklenecektir.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-white mt-5">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start">
                    <p class="mb-0">&copy; 2023 Elizi Emlak Rezervasyon Sistemi. Tüm hakları saklıdır.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <div class="btn-group">
                        <button class="btn btn-sm btn-outline-secondary" data-page="settings"><i class="bi bi-gear me-1"></i> Ayarlar</button>
                        <button class="btn btn-sm btn-outline-secondary" id="export-data"><i class="bi bi-download me-1"></i> Verileri Dışa Aktar</button>
                        <button class="btn btn-sm btn-outline-secondary" id="reset-data"><i class="bi bi-trash me-1"></i> Tüm Verileri Sıfırla</button>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Data storage and management
        class DataManager {
            constructor() {
                // Initialize data if not exists
                if(!localStorage.getItem('portfolios')) {
                    localStorage.setItem('portfolios', JSON.stringify([]));
                }
                
                if(!localStorage.getItem('reservations')) {
                    localStorage.setItem('reservations', JSON.stringify([]));
                }
            }
            
            // Portfolio methods
            getPortfolios() {
                return JSON.parse(localStorage.getItem('portfolios'));
            }
            
            savePortfolio(portfolio) {
                const portfolios = this.getPortfolios();
                if(portfolio.id) {
                    // Update existing portfolio
                    const index = portfolios.findIndex(p => p.id === portfolio.id);
                    if(index !== -1) {
                        portfolios[index] = portfolio;
                    }
                } else {
                    // Add new portfolio
                    portfolio.id = Date.now();
                    portfolios.push(portfolio);
                }
                localStorage.setItem('portfolios', JSON.stringify(portfolios));
                return portfolio;
            }
            
            deletePortfolio(id) {
                const portfolios = this.getPortfolios().filter(p => p.id !== id);
                localStorage.setItem('portfolios', JSON.stringify(portfolios));
            }
            
            // Reservation methods
            getReservations() {
                return JSON.parse(localStorage.getItem('reservations'));
            }
            
            saveReservation(reservation) {
                const reservations = this.getReservations();
                if(reservation.id) {
                    // Update existing reservation
                    const index = reservations.findIndex(r => r.id === reservation.id);
                    if(index !== -1) {
                        reservations[index] = reservation;
                    }
                } else {
                    // Add new reservation
                    reservation.id = Date.now();
                    reservations.push(reservation);
                }
                localStorage.setItem('reservations', JSON.stringify(reservations));
                return reservation;
            }
            
            deleteReservation(id) {
                const reservations = this.getReservations().filter(r => r.id !== id);
                localStorage.setItem('reservations', JSON.stringify(reservations));
            }
            
            // Stats methods
            getStats() {
                const portfolios = this.getPortfolios();
                const reservations = this.getReservations();
                
                const totalReservations = reservations.length;
                const activePortfolios = portfolios.filter(p => p.status === 'available').length;
                
                let totalRevenue = 0;
                let totalCommission = 0;
                
                reservations.forEach(r => {
                    totalRevenue += parseFloat(r.totalAmount) || 0;
                    totalCommission += parseFloat(r.commission) || 0;
                });
                
                return {
                    totalReservations,
                    activePortfolios,
                    totalRevenue: totalRevenue.toFixed(2),
                    totalCommission: totalCommission.toFixed(2)
                };
            }
        }

        // UI Controller
        class UIController {
            constructor() {
                this.dataManager = new DataManager();
                this.currentPage = 'dashboard';
                this.currentDate = new Date();
                
                // Initialize navigation
                this.setupNavigation();
                
                // Initialize dashboard
                this.loadDashboard();
                
                // Initialize forms
                this.setupForms();
                
                // Initialize other event listeners
                this.setupEventListeners();
            }
            
            setupNavigation() {
                // Sidebar navigation
                document.querySelectorAll('.sidebar .nav-link, .dropdown-item[data-page]').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = link.getAttribute('data-page');
                        if(page) {
                            this.showPage(page);
                        }
                    });
                });
                
                // Back button in forms
                document.querySelectorAll('button[data-page]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = btn.getAttribute('data-page');
                        this.showPage(page);
                    });
                });
            }
            
            showPage(page) {
                // Hide all pages
                document.querySelectorAll('.page').forEach(pageEl => {
                    pageEl.classList.remove('active');
                });
                
                // Show the selected page
                document.getElementById(`${page}-page`).classList.add('active');
                
                // Update active link in sidebar
                document.querySelectorAll('.sidebar .nav-link').forEach(link => {
                    link.classList.remove('active');
                    if(link.getAttribute('data-page') === page) {
                        link.classList.add('active');
                    }
                });
                
                // Load page-specific content
                this.currentPage = page;
                switch(page) {
                    case 'dashboard':
                        this.loadDashboard();
                        break;
                    case 'reservations':
                        this.loadReservations();
                        break;
                    case 'portfolios':
                        this.loadPortfolios();
                        break;
                    case 'add-portfolio':
                        this.loadAddPortfolio();
                        break;
                    case 'add-reservation':
                        this.loadAddReservation();
                        break;
                }
            }
            
            loadDashboard() {
                // Load stats
                const stats = this.dataManager.getStats();
                const statsHtml = `
                    <div class="col-xl-3 col-md-6">
                        <div class="card stat-card">
                            <i class="bi bi-calendar-check"></i>
                            <div class="number">${stats.totalReservations}</div>
                            <div class="label">Toplam Rezervasyon</div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card stat-card">
                            <i class="bi bi-house"></i>
                            <div class="number">${stats.activePortfolios}</div>
                            <div class="label">Aktif Portföy</div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card stat-card">
                            <i class="bi bi-currency-exchange"></i>
                            <div class="number">₺${stats.totalRevenue}</div>
                            <div class="label">Toplam Ciro</div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card stat-card">
                            <i class="bi bi-percent"></i>
                            <div class="number">₺${stats.totalCommission}</div>
                            <div class="label">Toplam Komisyon</div>
                        </div>
                    </div>
                `;
                document.getElementById('dashboard-stats').innerHTML = statsHtml;
                
                // Load portfolios table
                this.loadPortfoliosTable();
                
                // Load calendar
                this.renderCalendar();
                
                // Load reservation summary
                this.loadReservationSummary();
                
                // Populate portfolio select in reservation form
                this.populatePortfolioSelect();
            }
            
            loadPortfoliosTable() {
                const portfolios = this.dataManager.getPortfolios();
                let portfoliosHtml = '';
                
                if(portfolios.length === 0) {
                    portfoliosHtml = `
                        <tr>
                            <td colspan="6" class="text-center py-4">
                                <i class="bi bi-house-x fs-1 text-muted mb-2"></i>
                                <p class="mb-0">Henüz portföy eklenmemiş</p>
                                <button class="btn btn-sm btn-primary mt-2" data-page="add-portfolio">Portföy Ekle</button>
                            </td>
                        </tr>
                    `;
                } else {
                    portfolios.forEach(portfolio => {
                        let badgeClass = 'bg-success';
                        if(portfolio.status === 'partially') badgeClass = 'bg-warning';
                        if(portfolio.status === 'occupied') badgeClass = 'bg-danger';
                        
                        let statusText = 'Müsait';
                        if(portfolio.status === 'partially') statusText = 'Kısmen Dolu';
                        if(portfolio.status === 'occupied') statusText = 'Dolu';
                        
                        portfoliosHtml += `
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="bg-primary text-white rounded p-2 me-3">
                                            <i class="bi bi-house-door fs-4"></i>
                                        </div>
                                        <div>
                                            <div class="fw-bold">${portfolio.name}</div>
                                            <div class="text-muted small">#${portfolio.id}</div>
                                        </div>
                                    </div>
                                </td>
                                <td>${portfolio.location}</td>
                                <td>${portfolio.type}</td>
                                <td>₺${portfolio.price}/gün</td>
                                <td><span class="badge ${badgeClass}">${statusText}</span></td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary me-1" data-portfolio-id="${portfolio.id}"><i class="bi bi-eye"></i></button>
                                    <button class="btn btn-sm btn-outline-success" data-portfolio-id="${portfolio.id}" data-page="add-reservation"><i class="bi bi-calendar-plus"></i></button>
                                </td>
                            </tr>
                        `;
                    });
                }
                
                document.getElementById('portfolios-list').innerHTML = portfoliosHtml;
                
                // Add event listeners to portfolio actions
                document.querySelectorAll('[data-portfolio-id]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        if(btn.getAttribute('data-page')) {
                            this.showPage(btn.getAttribute('data-page'));
                        }
                    });
                });
            }
            
            renderCalendar() {
                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth();
                
                // Set calendar header
                const monthNames = ["Ocak", "Şubat", "Mart", "Nisan", "Mayıs", "Haziran", 
                                   "Temmuz", "Ağustos", "Eylül", "Ekim", "Kasım", "Aralık"];
                document.getElementById('calendar-month').textContent = `${monthNames[month]} ${year}`;
                
                // Get first day of month and number of days
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const daysInMonth = lastDay.getDate();
                
                // Create calendar days
                let calendarHtml = '';
                
                // Add empty cells for days before the first day of the month
                for(let i = 0; i < firstDay.getDay(); i++) {
                    calendarHtml += `<div class="col p-0 calendar-day"></div>`;
                }
                
                // Add cells for each day of the month
                const today = new Date();
                const reservations = this.dataManager.getReservations();
                
                for(let day = 1; day <= daysInMonth; day++) {
                    const currentDate = new Date(year, month, day);
                    const isToday = currentDate.toDateString() === today.toDateString();
                    
                    // Check if this date has reservations
                    let hasReservation = false;
                    reservations.forEach(res => {
                        const start = new Date(res.checkinDate);
                        const end = new Date(res.checkoutDate);
                        if(currentDate >= start && currentDate <= end) {
                            hasReservation = true;
                        }
                    });
                    
                    calendarHtml += `
                        <div class="col p-0 calendar-day ${isToday ? 'today' : ''} ${hasReservation ? 'booked' : ''}">
                            <div class="day-number">${day}</div>
                    `;
                    
                    // Add reservation events for this day
                    reservations.forEach(res => {
                        const start = new Date(res.checkinDate);
                        const end = new Date(res.checkoutDate);
                        if(currentDate >= start && currentDate <= end) {
                            calendarHtml += `<div class="reservation-event">${res.customerName} - ${res.portfolioName}</div>`;
                        }
                    });
                    
                    calendarHtml += `</div>`;
                }
                
                document.getElementById('calendar-days').innerHTML = calendarHtml;
            }
            
            loadReservationSummary() {
                const stats = this.dataManager.getStats();
                const portfolios = this.dataManager.getPortfolios();
                
                // Calculate days
                const totalDays = portfolios.length * 365; // Simplified calculation
                const occupiedDays = Math.floor(totalDays * 0.6); // Simplified
                const availableDays = totalDays - occupiedDays;
                
                // Create popular portfolios chart
                let portfolioChartHtml = '';
                portfolios.slice(0, 4).forEach((portfolio, index) => {
                    const colors = ['bg-primary', 'bg-info', 'bg-warning', 'bg-danger'];
                    const percent = 65 - (index * 10); // Simplified popularity
                    
                    portfolioChartHtml += `
                        <div class="mb-3">
                            <div class="d-flex justify-content-between small mb-1">
                                <div>${portfolio.name}</div>
                                <div>${percent}% doluluk</div>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar ${colors[index]}" style="width: ${percent}%"></div>
                            </div>
                        </div>
                    `;
                });
                
                const summaryHtml = `
                    <div class="d-flex justify-content-between mb-3">
                        <div class="text-muted">Toplam Rezervasyon:</div>
                        <div class="fw-bold">${stats.totalReservations}</div>
                    </div>
                    <div class="d-flex justify-content-between mb-3">
                        <div class="text-muted">Dolu Gün Sayısı:</div>
                        <div class="fw-bold">${occupiedDays} gün</div>
                    </div>
                    <div class="d-flex justify-content-between mb-3">
                        <div class="text-muted">Boş Gün Sayısı:</div>
                        <div class="fw-bold">${availableDays} gün</div>
                    </div>
                    <div class="d-flex justify-content-between mb-3">
                        <div class="text-muted">Toplam Ciro:</div>
                        <div class="fw-bold">₺${stats.totalRevenue}</div>
                    </div>
                    <div class="d-flex justify-content-between mb-3">
                        <div class="text-muted">Toplam Komisyon:</div>
                        <div class="fw-bold">₺${stats.totalCommission}</div>
                    </div>
                    <hr>
                    <h6 class="mb-3">En Popüler Portföyler</h6>
                    ${portfolioChartHtml}
                `;
                
                document.getElementById('reservation-summary').innerHTML = summaryHtml;
            }
            
            populatePortfolioSelect() {
                const portfolios = this.dataManager.getPortfolios();
                let optionsHtml = '<option value="" selected disabled>Portföy seçin</option>';
                
                portfolios.forEach(portfolio => {
                    optionsHtml += `<option value="${portfolio.id}">${portfolio.name} (${portfolio.location})</option>`;
                });
                
                document.getElementById('portfolio-select').innerHTML = optionsHtml;
                document.getElementById('new-portfolio-select').innerHTML = optionsHtml;
            }
            
            loadReservations() {
                const reservations = this.dataManager.getReservations();
                let reservationsHtml = '';
                
                if(reservations.length === 0) {
                    reservationsHtml = `
                        <tr>
                            <td colspan="8" class="text-center py-4">
                                <i class="bi bi-calendar-x fs-1 text-muted mb-2"></i>
                                <p class="mb-0">Henüz rezervasyon bulunmamaktadır</p>
                                <button class="btn btn-sm btn-success mt-2" data-page="add-reservation">Rezervasyon Ekle</button>
                            </td>
                        </tr>
                    `;
                } else {
                    reservations.forEach(res => {
                        const startDate = new Date(res.checkinDate);
                        const endDate = new Date(res.checkoutDate);
                        const formattedDate = `${startDate.getDate()}/${startDate.getMonth()+1}/${startDate.getFullYear()} - ${endDate.getDate()}/${endDate.getMonth()+1}/${endDate.getFullYear()}`;
                        
                        let statusClass = 'bg-success';
                        if(res.status === 'completed') statusClass = 'bg-secondary';
                        if(res.status === 'canceled') statusClass = 'bg-danger';
                        
                        let statusText = 'Aktif';
                        if(res.status === 'completed') statusText = 'Tamamlandı';
                        if(res.status === 'canceled') statusText = 'İptal Edildi';
                        
                        reservationsHtml += `
                            <tr class="reservation-row">
                                <td>#${res.id}</td>
                                <td>${res.portfolioName}</td>
                                <td>${res.customerName}</td>
                                <td>${formattedDate}</td>
                                <td>₺${res.totalAmount}</td>
                                <td>₺${res.commission}</td>
                                <td><span class="badge ${statusClass}">${statusText}</span></td>
                                <td class="action-buttons">
                                    <button class="btn btn-sm btn-outline-primary me-1" data-reservation-id="${res.id}"><i class="bi bi-pencil"></i></button>
                                    <button class="btn btn-sm btn-outline-danger" data-reservation-id="${res.id}"><i class="bi bi-trash"></i></button>
                                </td>
                            </tr>
                        `;
                    });
                }
                
                document.getElementById('reservations-list').innerHTML = reservationsHtml;
                
                // Add event listeners to reservation actions
                document.querySelectorAll('[data-reservation-id]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const id = btn.getAttribute('data-reservation-id');
                        if(btn.classList.contains('btn-outline-danger')) {
                            if(confirm('Bu rezervasyonu silmek istediğinize emin misiniz?')) {
                                this.dataManager.deleteReservation(parseInt(id));
                                this.loadReservations();
                                this.showToast('Rezervasyon başarıyla silindi', 'success');
                            }
                        } else {
                            // Edit reservation
                            this.editReservation(parseInt(id));
                        }
                    });
                });
                
                // Setup search and filter
                document.getElementById('reservation-search').addEventListener('input', (e) => {
                    this.filterReservations();
                });
                
                document.getElementById('reservation-filter').addEventListener('change', (e) => {
                    this.filterReservations();
                });
            }
            
            filterReservations() {
                const searchTerm = document.getElementById('reservation-search').value.toLowerCase();
                const filter = document.getElementById('reservation-filter').value;
                
                document.querySelectorAll('#reservations-list tr').forEach(row => {
                    const text = row.textContent.toLowerCase();
                    const status = row.querySelector('.badge').textContent;
                    
                    let matchesSearch = text.includes(searchTerm);
                    let matchesFilter = filter === 'all' || 
                                      (filter === 'active' && status === 'Aktif') ||
                                      (filter === 'completed' && status === 'Tamamlandı') ||
                                      (filter === 'canceled' && status === 'İptal Edildi');
                    
                    row.style.display = (matchesSearch && matchesFilter) ? '' : 'none';
                });
            }
            
            loadPortfolios() {
                const portfolios = this.dataManager.getPortfolios();
                let portfoliosHtml = '';
                
                if(portfolios.length === 0) {
                    portfoliosHtml = `
                        <div class="col-12">
                            <div class="empty-state">
                                <i class="bi bi-house-x"></i>
                                <h4>Henüz portföy eklenmemiş</h4>
                                <p>Yeni portföy eklemek için aşağıdaki butonu kullanabilirsiniz</p>
                                <button class="btn btn-primary" data-page="add-portfolio">Portföy Ekle</button>
                            </div>
                        </div>
                    `;
                } else {
                    portfolios.forEach(portfolio => {
                        let badgeClass = 'bg-success';
                        if(portfolio.status === 'partially') badgeClass = 'bg-warning';
                        if(portfolio.status === 'occupied') badgeClass = 'bg-danger';
                        
                        let statusText = 'Müsait';
                        if(portfolio.status === 'partially') statusText = 'Kısmen Dolu';
                        if(portfolio.status === 'occupied') statusText = 'Dolu';
                        
                        portfoliosHtml += `
                            <div class="col-md-6 col-lg-4 mb-4">
                                <div class="card portfolio-item">
                                    <div class="img-placeholder">
                                        <i class="bi bi-house"></i>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between">
                                            <h5 class="card-title">${portfolio.name}</h5>
                                            <span class="badge ${badgeClass}">${statusText}</span>
                                        </div>
                                        <p class="card-text">
                                            <i class="bi bi-geo-alt me-1"></i> ${portfolio.location}<br>
                                            <i class="bi bi-door-open me-1"></i> ${portfolio.type}<br>
                                            <i class="bi bi-cash me-1"></i> ₺${portfolio.price}/gün
                                        </p>
                                        <div class="d-flex justify-content-between">
                                            <button class="btn btn-sm btn-outline-primary" data-portfolio-id="${portfolio.id}">Detay</button>
                                            <button class="btn btn-sm btn-outline-danger" data-portfolio-id="${portfolio.id}">Sil</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                }
                
                document.getElementById('portfolios-grid').innerHTML = portfoliosHtml;
                
                // Add event listeners to portfolio actions
                document.querySelectorAll('[data-portfolio-id]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const id = parseInt(btn.getAttribute('data-portfolio-id'));
                        
                        if(btn.classList.contains('btn-outline-danger')) {
                            if(confirm('Bu portföyü silmek istediğinize emin misiniz?')) {
                                this.dataManager.deletePortfolio(id);
                                this.loadPortfolios();
                                this.showToast('Portföy başarıyla silindi', 'success');
                            }
                        } else {
                            // View portfolio details
                            this.editPortfolio(id);
                        }
                    });
                });
            }
            
            loadAddPortfolio() {
                // Clear form
                document.getElementById('portfolio-form').reset();
            }
            
            loadAddReservation() {
                // Clear form
                document.getElementById('new-reservation-form').reset();
                this.populatePortfolioSelect();
            }
            
            setupForms() {
                // Portfolio form
                document.getElementById('portfolio-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const portfolio = {
                        name: document.getElementById('portfolio-name').value,
                        location: document.getElementById('portfolio-location').value,
                        type: document.getElementById('portfolio-type').value,
                        price: parseFloat(document.getElementById('portfolio-price').value),
                        status: document.getElementById('portfolio-status').value,
                        description: document.getElementById('portfolio-description').value
                    };
                    
                    this.dataManager.savePortfolio(portfolio);
                    this.showPage('portfolios');
                    this.showToast('Portföy başarıyla kaydedildi', 'success');
                });
                
                // Reservation form on dashboard
                document.getElementById('reservation-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveReservation('reservation-form');
                });
                
                // New reservation form
                document.getElementById('new-reservation-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveReservation('new-reservation-form');
                });
            }
            
            saveReservation(formId) {
                const portfolioId = document.getElementById(formId === 'reservation-form' ? 'portfolio-select' : 'new-portfolio-select').value;
                const portfolio = this.dataManager.getPortfolios().find(p => p.id == portfolioId);
                
                if(!portfolio) {
                    alert('Lütfen geçerli bir portföy seçin');
                    return;
                }
                
                const reservation = {
                    portfolioId: portfolioId,
                    portfolioName: portfolio.name,
                    checkinDate: document.getElementById(formId === 'reservation-form' ? 'checkin-date' : 'new-checkin-date').value,
                    checkoutDate: document.getElementById(formId === 'reservation-form' ? 'checkout-date' : 'new-checkout-date').value,
                    customerName: document.getElementById(formId === 'reservation-form' ? 'customer-name' : 'new-customer-name').value,
                    customerPhone: document.getElementById(formId === 'reservation-form' ? 'customer-phone' : 'new-customer-phone').value,
                    customerEmail: document.getElementById(formId === 'reservation-form' ? 'customer-email' : 'new-customer-email').value,
                    totalAmount: document.getElementById(formId === 'reservation-form' ? 'total-amount' : 'new-total-amount').value,
                    commission: document.getElementById(formId === 'reservation-form' ? 'commission' : 'new-commission').value,
                    notes: document.getElementById(formId === 'reservation-form' ? 'notes' : 'new-notes').value,
                    status: formId === 'new-reservation-form' ? document.getElementById('reservation-status').value : 'active'
                };
                
                this.dataManager.saveReservation(reservation);
                
                if(formId === 'reservation-form') {
                    this.loadDashboard();
                } else {
                    this.showPage('reservations');
                }
                
                this.showToast('Rezervasyon başarıyla kaydedildi', 'success');
            }
            
            editPortfolio(id) {
                const portfolio = this.dataManager.getPortfolios().find(p => p.id === id);
                if(portfolio) {
                    document.getElementById('portfolio-name').value = portfolio.name;
                    document.getElementById('portfolio-location').value = portfolio.location;
                    document.getElementById('portfolio-type').value = portfolio.type;
                    document.getElementById('portfolio-price').value = portfolio.price;
                    document.getElementById('portfolio-status').value = portfolio.status;
                    document.getElementById('portfolio-description').value = portfolio.description || '';
                    
                    // Set portfolio id in form for update
                    document.getElementById('portfolio-form').dataset.id = portfolio.id;
                    
                    this.showPage('add-portfolio');
                }
            }
            
            editReservation(id) {
                const reservation = this.dataManager.getReservations().find(r => r.id === id);
                if(reservation) {
                    document.getElementById('new-portfolio-select').value = reservation.portfolioId;
                    document.getElementById('new-checkin-date').value = reservation.checkinDate;
                    document.getElementById('new-checkout-date').value = reservation.checkoutDate;
                    document.getElementById('new-customer-name').value = reservation.customerName;
                    document.getElementById('new-customer-phone').value = reservation.customerPhone;
                    document.getElementById('new-customer-email').value = reservation.customerEmail || '';
                    document.getElementById('new-total-amount').value = reservation.totalAmount;
                    document.getElementById('new-commission').value = reservation.commission;
                    document.getElementById('new-notes').value = reservation.notes || '';
                    document.getElementById('reservation-status').value = reservation.status;
                    
                    // Set reservation id in form for update
                    document.getElementById('new-reservation-form').dataset.id = reservation.id;
                    
                    this.showPage('add-reservation');
                }
            }
            
            setupEventListeners() {
                // Calendar navigation
                document.getElementById('prev-month').addEventListener('click', () => {
                    this.currentDate.setMonth(this.currentDate.getMonth() - 1);
                    this.renderCalendar();
                });
                
                document.getElementById('next-month').addEventListener('click', () => {
                    this.currentDate.setMonth(this.currentDate.getMonth() + 1);
                    this.renderCalendar();
                });
                
                // Data export
                document.getElementById('export-data').addEventListener('click', () => {
                    const portfolios = this.dataManager.getPortfolios();
                    const reservations = this.dataManager.getReservations();
                    
                    const data = {
                        portfolios,
                        reservations,
                        exportedAt: new Date().toISOString()
                    };
                    
                    const dataStr = JSON.stringify(data, null, 2);
                    const blob = new Blob([dataStr], {type: 'application/json'});
                    const url = URL.createObjectURL(blob);
                    
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `elizi-emlak-data-${new Date().toISOString().slice(0,10)}.json`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    this.showToast('Veriler başarıyla dışa aktarıldı', 'success');
                });
                
                // Data reset
                document.getElementById('reset-data').addEventListener('click', () => {
                    if(confirm('Tüm verileri sıfırlamak istediğinize emin misiniz? Bu işlem geri alınamaz!')) {
                        localStorage.removeItem('portfolios');
                        localStorage.removeItem('reservations');
                        
                        // Reinitialize data manager
                        this.dataManager = new DataManager();
                        
                        // Reload current page
                        this.showPage(this.currentPage);
                        
                        this.showToast('Tüm veriler sıfırlandı', 'success');
                    }
                });
            }
            
            showToast(message, type = 'success') {
                // Create toast element
                const toast = document.createElement('div');
                toast.className = `toast align-items-center text-white bg-${type} border-0`;
                toast.setAttribute('role', 'alert');
                toast.setAttribute('aria-live', 'assertive');
                toast.setAttribute('aria-atomic', 'true');
                
                toast.innerHTML = `
                    <div class="d-flex">
                        <div class="toast-body">${message}</div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                `;
                
                // Add to container
                const container = document.createElement('div');
                container.className = 'toast-container position-fixed bottom-0 end-0 p-3';
                container.appendChild(toast);
                document.body.appendChild(container);
                
                // Initialize and show toast
                const bsToast = new bootstrap.Toast(toast);
                bsToast.show();
                
                // Remove after hiding
                toast.addEventListener('hidden.bs.toast', () => {
                    container.remove();
                });
                
                // Auto hide after 3 seconds
                setTimeout(() => {
                    bsToast.hide();
                }, 3000);
            }
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const app = new UIController();
            
            // Add sample data if localStorage is empty
            if(localStorage.getItem('portfolios') === '[]') {
                const dataManager = new DataManager();
                
                // Add sample portfolios
                dataManager.savePortfolio({
                    name: "Deniz Manzaralı Villa",
                    location: "Bodrum, Muğla",
                    type: "4+1",
                    price: 1750,
                    status: "available",
                    description: "Lüks deniz manzaralı villa, özel havuz, 4 yatak odası"
                });
                
                dataManager.savePortfolio({
                    name: "Merkezi Daire",
                    location: "Şişli, İstanbul",
                    type: "3+1",
                    price: 850,
                    status: "available",
                    description: "Şehrin merkezinde modern daire, 3 yatak odası"
                });
                
                dataManager.savePortfolio({
                    name: "Bahçeli Müstakil",
                    location: "Çeşme, İzmir",
                    type: "3+1",
                    price: 1200,
                    status: "partially",
                    description: "Geniş bahçeli müstakil ev, denize yürüme mesafesi"
                });
                
                dataManager.savePortfolio({
                    name: "Lüks Penthouse",
                    location: "Beşiktaş, İstanbul",
                    type: "5+1",
                    price: 2500,
                    status: "occupied",
                    description: "Boğaz manzaralı lüks penthouse, 5 yatak odası"
                });
                
                // Add sample reservation
                const today = new Date();
                const nextWeek = new Date();
                nextWeek.setDate(today.getDate() + 7);
                
                dataManager.saveReservation({
                    portfolioId: 1,
                    portfolioName: "Deniz Manzaralı Villa",
                    checkinDate: today.toISOString().split('T')[0],
                    checkoutDate: nextWeek.toISOString().split('T')[0],
                    customerName: "Ahmet Yılmaz",
                    customerPhone: "05551234567",
                    customerEmail: "ahmet@example.com",
                    totalAmount: 12250,
                    commission: 1837.5,
                    notes: "Özel talep: Havuz ısıtması",
                    status: "active"
                });
            }
        });
    </script>
</body>
</html>
